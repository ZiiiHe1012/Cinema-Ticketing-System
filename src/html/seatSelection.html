<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影选座系统 - 座位选择</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.png">
    <link rel="stylesheet" type="text/css" href="../styles/index.css">
    <link rel="stylesheet" type="text/css" href="../styles/seatSelection.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <div class="infoBar">
        <div class="projectName">
            <p class="projectNameFont">CINEMATIX</p>
        </div>
        <div class="actionContainer">
            <div class="avatar"></div>
            <button class="return" id="returnButton">
                <span class="reservationFont">返回主界面</span>
            </button>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-container">
        <!-- 左侧座位图 -->
        <div class="left-panel">
            <div class="seat-legend">
                <div class="legend-item">
                    <img src="../images/greenSeat.png" alt="可选">
                    <span>可选</span>
                </div>
                <div class="legend-item">
                    <img src="../images/yellowSeat.png" alt="已选">
                    <span>已选</span>
                </div>
                <div class="legend-item">
                    <img src="../images/redSeat.png" alt="已售">
                    <span>已售</span>
                </div>
                <div class="legend-item">
                    <img src="../images/blackSeat.png" alt="不可选">
                    <span>不可选</span>
                </div>
            </div>
            
            <div id="canvas-container">
                <canvas id="myCanvas" width="900" height="900"></canvas>
            </div>
        </div>

        <!-- 右侧信息面板 -->
        <div class="right-panel">
            <div class="movie-info">
                <h2>哪吒之魔童闹海</h2>
                <p class="session-info">
                    <span>放映时间：2025-06-10 14:00-16:30</span>
                    <span>影厅：3号厅</span>
                </p>
            </div>

            <!-- 购票人员列表 -->
            <div class="person-list" id="personList">
                <h3 id="listTitle">购票人员</h3>
                <div id="personsContainer">
                    <!-- 动态插入人员卡片 -->
                </div>
            </div>

            <!-- 选座信息汇总 -->
            <div class="selection-summary">
                <div class="selected-info">
                    <p>已选座位：<span id="selectedCount">0</span> 个</p>
                    <p>总价：¥<span id="totalPrice">0</span></p>
                </div>
                <div id="selectedSeatsInfo">
                    <!-- 动态显示已选座位信息 -->
                </div>
            </div>

            <!-- 控制按钮 -->
            <div class="control-buttons">
                <button id="autoSelectBtn" class="btn-primary">自动选座</button>
                <button id="clearSelectionBtn" class="btn-secondary">清空选择</button>
                <button id="confirmBtn" class="btn-confirm">确认选座</button>
            </div>
        </div>
    </div>

    <!-- 支付/预定弹窗 -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <span class="modal-close" id="modalClose">&times;</span>
            <h3>请选择操作</h3>
            <div class="modal-buttons">
                <button class="btn modal-btn" id="reserveBtn">预定</button>
                <button class="btn modal-btn pay" id="payBtn">去支付</button>
            </div>
        </div>
    </div>

    <!-- 支付弹窗（复用原有） -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <span class="modal-close" id="paymentModalClose">&times;</span>
            <div id="paymentOptions">
                <h3>请选择支付方式</h3>
                <div class="options">
                    <button class="btn payment-option" data-method="wechat">微信支付</button>
                    <button class="btn payment-option" data-method="alipay">支付宝</button>
                    <button class="btn payment-option" data-method="bank">银行卡</button>
                </div>
            </div>
            <form id="bankForm" style="display:none;">
                <h3>银行卡支付</h3>
                <label>
                    卡号：
                    <input type="text" id="cardNumber" placeholder="请输入卡号">
                </label>
                <label>
                    密码：
                    <input type="password" id="cardPassword" placeholder="请输入密码">
                </label>
                <button type="submit" class="btn">确认支付</button>
            </form>
        </div>
    </div>

    <script src="../scripts/seatSelection.js"></script>
</body>
</html>
